<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="completed_orders_page" name="Completed Orders Page">
    <t t-call="web.layout">
      <t t-set="title">Khoản đầu tư đã khớp</t>

      <t t-set="head">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
        <link rel="stylesheet" href="/transaction_list/static/src/css/order_book.css"/>
      </t>

      <div id="headermana-container"></div>

      <div class="order-book-container">
        <div class="container-fluid py-4">
          <div id="loading-spinner" class="loading-container">
            <div class="loading-spinner">
              <div class="spinner-border" role="status">
                <span class="visually-hidden">Đang tải...</span>
              </div>
              <div class="loading-text">Đang tải dữ liệu...</div>
            </div>
          </div>

          <div id="error-container" class="error-container" style="display: none;">
            <div class="error-icon"><i class="bi bi-exclamation-triangle"></i></div>
            <h4 class="error-title">Có lỗi xảy ra</h4>
            <p class="error-message" id="error-message">Không thể tải dữ liệu</p>
            <button class="btn btn-primary mt-3" onclick="location.reload()">
              <i class="bi bi-arrow-clockwise me-2"></i>
              Thử lại
            </button>
          </div>

          <div id="completed-orders-widget" class="w-100"></div>
        </div>
      </div>

      <script type="text/javascript">
        window.showError = function(message) {
          const errorContainer = document.getElementById('error-container');
          const errorMessage = document.getElementById('error-message');
          const loadingSpinner = document.getElementById('loading-spinner');
          const widgetContainer = document.getElementById('completed-orders-widget');
          if (errorContainer &amp;&amp; errorMessage) {
            errorMessage.textContent = message || 'Có lỗi xảy ra khi tải dữ liệu';
            errorContainer.style.display = 'block';
          }
          if (loadingSpinner) loadingSpinner.style.display = 'none';
          if (widgetContainer) widgetContainer.style.display = 'none';
        };
        window.hideSpinner = function() {
          const loadingSpinner = document.getElementById('loading-spinner');
          const errorContainer = document.getElementById('error-container');
          const widgetContainer = document.getElementById('completed-orders-widget');
          if (loadingSpinner) loadingSpinner.style.display = 'none';
          if (errorContainer) errorContainer.style.display = 'none';
          if (widgetContainer) widgetContainer.style.display = 'block';
        };
      </script>

      <t t-set="js">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      </t>
      <t t-call-assets="web.assets_frontend" t-js="true"/>
    </t>
  </template>
</odoo>


