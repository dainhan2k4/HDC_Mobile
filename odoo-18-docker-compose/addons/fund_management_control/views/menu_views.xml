<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Root menu -->
    <menuitem id="menu_fmc_root" name="Master Data Management" sequence="10"/>

    <!-- Actions -->
    <!-- Views for Fund Certificate: list and form to show useful columns instead of only id -->
    <record id="view_fund_certificate_list" model="ir.ui.view">
        <field name="name">fund.certificate.list</field>
        <field name="model">fund.certificate</field>
        <field name="arch" type="xml">
            <list string="Fund Certificates">
                <field name="symbol"/>
                <field name="market"/>
                <field name="short_name_vn"/>
                <field name="short_name_en" optional="hide"/>
                <field name="current_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                <field name="reference_price" widget="monetary" options="{'currency_field': 'currency_id'}" optional="hide"/>
                <field name="ceiling_price" widget="monetary" options="{'currency_field': 'currency_id'}" optional="hide"/>
                <field name="floor_price" widget="monetary" options="{'currency_field': 'currency_id'}" optional="hide"/>
                <!-- volume bị bỏ khỏi listview: dùng initial_certificate_quantity ở form -->
                <field name="fund_type"/>
                <field name="risk_level" optional="show"/>
                <field name="product_type"/>
                <field name="product_status"/>
                <field name="is_active"/>
                <field name="last_update"/>
                <field name="inception_date"/>
                <field name="closure_date"/>
            </list>
        </field>
    </record>

    <record id="view_fund_certificate_form" model="ir.ui.view">
        <field name="name">fund.certificate.form</field>
        <field name="model">fund.certificate</field>
        <field name="arch" type="xml">
            <form string="Fund Certificate">
                <sheet>
                    <group>
                        <group string="Thông tin chứng khoán">
                            <field name="security_ref_id" context="{'search_default_has_daily_ohlc': 1}"/>
                            <field name="symbol"/>
                            <field name="market"/>
                            <field name="short_name_vn"/>
                            <field name="short_name_en"/>
                            <!-- Bỏ security_type và floor_code -->
                            <field name="fund_color" widget="color"/>
                            <field name="fund_image" widget="image"/>
                        </group>
                        <group string="Thông tin giá">
                            <field name="current_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="reference_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="ceiling_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="floor_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="high_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="low_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <!-- volume bỏ khỏi form: volume = initial_certificate_quantity (computed) -->
                            <field name="total_value" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="change" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="change_percent"/>
                            <field name="last_price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="last_trading_date"/>
                            <field name="is_active"/>
                            <field name="last_update"/>
                        </group>
                    </group>
                    <group>
                        <group string="Thông tin quỹ">
                            <field name="inception_date"/>
                            <field name="closure_date"/>
                            <field name="receive_money_time"/>
                            <field name="payment_deadline"/>
                            <field name="redemption_time"/>
                            <field name="report_website" widget="url"/>
                        </group>
                        <group string="Phân loại">
                            <field name="fund_type"/>
                            <field name="risk_level"/>
                            <field name="product_type"/>
                            <field name="product_status"/>
                            <field name="initial_certificate_quantity"/>
                            <field name="initial_certificate_price"/>
                            <field name="capital_cost"/>
                        </group>
                    </group>
                    <group string="Giao dịch theo ngày">
                        <field name="monday"/>
                        <field name="tuesday"/>
                        <field name="wednesday"/>
                        <field name="thursday"/>
                        <field name="friday"/>
                        <field name="saturday"/>
                        <field name="sunday"/>
                    </group>
                    <group>
                        <field name="fund_description"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Fee Schedule list view -->
    <record id="view_fund_fee_schedule_list" model="ir.ui.view">
        <field name="name">fund.fee.schedule.list</field>
        <field name="model">fund.fee.schedule</field>
        <field name="arch" type="xml">
            <list string="Fee Schedules">
                <field name="fee_name"/>
                <field name="fee_code"/>
                <field name="fee_type"/>
                <field name="scheme_id"/>
                <field name="operator_1" optional="hide"/>
                <field name="initial_value"/>
                <field name="operator_2" optional="hide"/>
                <field name="end_value"/>
                <field name="fee_rate"/>
                <field name="activate"/>
            </list>
        </field>
    </record>

    <!-- SIP Settings list view -->
    <record id="view_fund_sip_settings_list" model="ir.ui.view">
        <field name="name">fund.sip.settings.list</field>
        <field name="model">fund.sip.settings</field>
        <field name="arch" type="xml">
            <list string="SIP Settings">
                <field name="sip_scheme_id"/>
                <field name="max_non_consecutive_periods"/>
                <field name="min_monthly_amount"/>
                <field name="min_maintenance_periods"/>
                <field name="cycle_code"/>
                <field name="program_period"/>
                <field name="allow_multiple_investments"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <!-- Tax Settings list view -->
    <record id="view_fund_tax_settings_list" model="ir.ui.view">
        <field name="name">fund.tax.settings.list</field>
        <field name="model">fund.tax.settings</field>
        <field name="arch" type="xml">
            <list string="Tax Settings">
                <field name="tax_name"/>
                <field name="tax_english_name"/>
                <field name="tax_code"/>
                <field name="rate"/>
                <field name="active"/>
            </list>
        </field>
    </record>
    <record id="action_fund_certificate" model="ir.actions.act_window">
        <field name="name">Fund Certificates</field>
        <field name="res_model">fund.certificate</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_fund_scheme_type" model="ir.actions.act_window">
        <field name="name">Scheme Types</field>
        <field name="res_model">fund.scheme.type</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_fund_scheme" model="ir.actions.act_window">
        <field name="name">Schemes</field>
        <field name="res_model">fund.scheme</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_fund_fee_schedule" model="ir.actions.act_window">
        <field name="name">Fee Schedules</field>
        <field name="res_model">fund.fee.schedule</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_fund_sip_settings" model="ir.actions.act_window">
        <field name="name">SIP Settings</field>
        <field name="res_model">fund.sip.settings</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_fund_tax_settings" model="ir.actions.act_window">
        <field name="name">Tax Settings</field>
        <field name="res_model">fund.tax.settings</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_data_holiday" model="ir.actions.act_window">
        <field name="name">Holidays</field>
        <field name="res_model">data.holiday</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_data_bank" model="ir.actions.act_window">
        <field name="name">Banks</field>
        <field name="res_model">data.bank</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_data_bank_branch" model="ir.actions.act_window">
        <field name="name">Bank Branches</field>
        <field name="res_model">data.bank.branch</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="action_data_country" model="ir.actions.act_window">
        <field name="name">Countries</field>
        <field name="res_model">data.country</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="action_data_city" model="ir.actions.act_window">
        <field name="name">Cities</field>
        <field name="res_model">data.city</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="action_data_ward" model="ir.actions.act_window">
        <field name="name">Wards</field>
        <field name="res_model">data.ward</field>
        <field name="view_mode">tree,form</field>
    </record>

    <!-- Sub menus -->
    <menuitem id="menu_fmc_master" name="Master Data" parent="menu_fmc_root" sequence="10"/>
    <menuitem id="menu_fmc_data" name="Data" parent="menu_fmc_root" sequence="20"/>

    <!-- Master Data menus -->
    <menuitem id="menu_fmc_fund_certificate" name="Fund Certificates" parent="menu_fmc_master" action="action_fund_certificate" sequence="10"/>
    <menuitem id="menu_fmc_scheme_type" name="Scheme Types" parent="menu_fmc_master" action="action_fund_scheme_type" sequence="20"/>
    <menuitem id="menu_fmc_scheme" name="Schemes" parent="menu_fmc_master" action="action_fund_scheme" sequence="30"/>
    <menuitem id="menu_fmc_fee_schedule" name="Fee Schedules" parent="menu_fmc_master" action="action_fund_fee_schedule" sequence="40"/>
    <menuitem id="menu_fmc_sip_settings" name="SIP Settings" parent="menu_fmc_master" action="action_fund_sip_settings" sequence="50"/>
    <menuitem id="menu_fmc_tax_settings" name="Tax Settings" parent="menu_fmc_master" action="action_fund_tax_settings" sequence="60"/>

    <!-- Data menus -->
    <menuitem id="menu_fmc_holiday" name="Holidays" parent="menu_fmc_data" action="action_data_holiday" sequence="10"/>
    <menuitem id="menu_fmc_bank" name="Banks" parent="menu_fmc_data" action="action_data_bank" sequence="20"/>
    <menuitem id="menu_fmc_bank_branch" name="Bank Branches" parent="menu_fmc_data" action="action_data_bank_branch" sequence="30"/>
    <menuitem id="menu_fmc_country" name="Countries" parent="menu_fmc_data" action="action_data_country" sequence="40"/>
    <menuitem id="menu_fmc_city" name="Cities" parent="menu_fmc_data" action="action_data_city" sequence="50"/>
    <menuitem id="menu_fmc_ward" name="Wards" parent="menu_fmc_data" action="action_data_ward" sequence="60"/>
    
    <!-- Auto Fund Certificate Creation -->
    <record id="action_auto_create_fund_certificates" model="ir.actions.server">
        <field name="name">Tự động tạo Fund Certificate từ OHLC</field>
        <field name="model_id" ref="model_auto_fund_certificate_creator"/>
        <field name="state">code</field>
        <field name="code">action = model.action_auto_create_fund_certificates()</field>
    </record>
    
    <menuitem id="menu_fmc_auto_fund_cert" name="Tự động tạo Fund Certificate" parent="menu_fmc_master" action="action_auto_create_fund_certificates" sequence="100"/>
</odoo>


