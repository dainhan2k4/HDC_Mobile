<odoo>
  <template id="fund_confirm" name="Fund Confirm Page">
    <t t-call="web.layout">
      <t t-set="title">Xác nhận lệnh mua</t>

      <t t-call-assets="web.assets_frontend" t-js="true" />
      <t t-set="head">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
      </t>

<!--      <t t-call="fund_management.fund_header_template"/>-->
      <div id="header-container"></div>

      <div class="profile-container fm">
        <div class="max-w-7xl mx-auto bg-white rounded-lg shadow p-6 rounded-4 mt-4">
          <div class="bg-white rounded-4 px-3 py-3">
                  <nav class="navbar navbar-expand-lg navbar-light bg-white rounded-4 shadow-sm mb-4 px-3 border py-2 " >
                    <div class="collapse navbar-collapse justify-content-center">
                      <ul class="navbar-nav d-flex w-100 justify-content-center fs-5">
                        <li class="nav-item flex-fill text-center">
                          <a class="fw-bold px-2 nav-link-blue nav-link-active" href="fund_buy">Mua</a>
                        </li>
                        <li class="nav-item flex-fill text-center">
                          <a class="px-2 nav-link-blue" href="fund_sell">Bán</a>
                        </li>
                        <li class="nav-item flex-fill text-center">
                          <a class="px-2 nav-link-blue" href="#">Chuyển đổi</a>
                        </li>
                      </ul>
                    </div>
                  </nav>

                <!-- Progress Steps -->
                  <!-- Bước tiến trình -->
                  <div class="progress-steps mx-auto" style="max-width: 500px;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                      <!-- Bước 1 -->
                      <div class="text-center">
                        <div class="step-circle">1</div>
                        <small class="d-block mt-2">Đặt lệnh</small>
                      </div>

                      <!-- Đường nối -->
                      <div class="flex-grow-1 mx-2 border-top position-relative" style="top: -18px;"></div>

                      <!-- Bước 2 -->
                      <div class="text-center">
                        <div class="step-circle active">2</div>
                        <small class="d-block mt-2">Xác nhận</small>
                      </div>

                      <!-- Đường nối -->
                      <div class="flex-grow-1 mx-2 border-top position-relative" style="top: -18px;"></div>

                      <!-- Bước 3 -->
                      <div class="text-center">
                        <div class="step-circle">3</div>
                        <small class="d-block mt-2">Kết quả</small>
                      </div>
                    </div>
                  </div>

                  <!-- Main Form -->
                  <div class="row">
                      <!-- Phương thức thanh toán -->
                      <div class="col-md-7">
                        <div class="card p-4 shadow-sm rounded-4">
                          <h5 class="mb-4">Phương thức thanh toán</h5>

                          <form id="payment-method-form">
                            <!-- PayOS -->
                            <div id="payos-payment-info">
                              <div class="form-text mb-3">
                                <p class="mb-2 fw-bold">Thanh toán trực tuyến qua PayOS</p>
                                <p class="small text-muted mb-0">Quét mã QR bên dưới để thanh toán hoặc click vào nút để mở trang thanh toán PayOS.</p>
                              </div>
                              
                              <!-- Thông tin thanh toán -->
                              <div id="payos-payment-details" class="mb-3" style="display:none;">
                                <!-- Thông tin ngân hàng -->
                                <div class="mb-3">
                                  <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-university text-primary me-2"></i>
                                    <span class="small fw-semibold">Ngân hàng</span>
                                  </div>
                                  <div class="small text-muted" id="payos-bank-name">Ngân hàng TMCP Quân đội</div>
                                </div>
                                
                                <!-- Chủ tài khoản -->
                                <div class="mb-3">
                                  <div class="small text-muted mb-1">Chủ tài khoản:</div>
                                  <div class="fw-bold" id="payos-account-holder">...</div>
                                </div>
                                
                                <!-- Số tài khoản -->
                                <div class="mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-1">
                                    <span class="small text-muted">Số tài khoản:</span>
                                    <button type="button" class="btn btn-sm btn-outline-success" id="copy-account-number" title="Sao chép">
                                      <i class="fas fa-copy"></i> Sao chép
                                    </button>
                                  </div>
                                  <div class="fw-bold" id="payos-account-number">...</div>
                                </div>
                                
                                <!-- Số tiền -->
                                <div class="mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-1">
                                    <span class="small text-muted">Số tiền:</span>
                                    <button type="button" class="btn btn-sm btn-outline-success" id="copy-amount" title="Sao chép">
                                      <i class="fas fa-copy"></i> Sao chép
                                    </button>
                                  </div>
                                  <div class="fw-bold" id="payos-amount">...</div>
                                </div>
                                
                                <!-- Nội dung -->
                                <div class="mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-1">
                                    <span class="small text-muted">Nội dung:</span>
                                    <button type="button" class="btn btn-sm btn-outline-success" id="copy-description" title="Sao chép">
                                      <i class="fas fa-copy"></i> Sao chép
                                    </button>
                                  </div>
                                  <div class="fw-bold" id="payos-description">...</div>
                                </div>
                                
                                <!-- Lưu ý -->
                                <div class="alert alert-warning small mb-0">
                                  <i class="fas fa-exclamation-triangle me-1"></i>
                                  <strong>Lưu ý:</strong> Nhập chính xác số tiền <span id="payos-amount-note" class="fw-bold">...</span> khi chuyển khoản
                                </div>
                              </div>
                              
                              <!-- Container cho QR code -->
                              <div id="payos-qr-code" class="text-center mt-3">
                                <!-- QR code sẽ được thêm vào đây -->
                                <div class="text-center py-3">
                                  <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Đang tạo mã QR...</span>
                                  </div>
                                  <p class="small text-muted mt-2 mb-0">Đang tạo mã QR thanh toán...</p>
                                </div>
                              </div>
                              
                              <!-- Header VietQR (giống PayOS) -->
                              <div id="payos-qr-header" class="text-center mb-2" style="display:none;">
                                <div class="d-flex align-items-center justify-content-center mb-2">
                                  <span class="text-danger fw-bold me-2">VIETQR</span>
                                  <span class="bg-warning text-dark px-2 py-1 rounded small fw-bold">PRO</span>
                                </div>
                              </div>
                              
                              <!-- Footer logos (giống PayOS) -->
                              <div id="payos-qr-footer" class="text-center mt-2" style="display:none;">
                                <div class="d-flex align-items-center justify-content-center gap-3 small">
                                  <span class="text-primary">napas 247</span>
                                  <span class="text-muted">|</span>
                                  <span class="text-primary">MB</span>
                                </div>
                              </div>
                              
                              <div class="d-grid gap-2 mt-3">
                                <button type="button" class="btn btn-primary" id="payos-payment-btn">Thanh toán với PayOS</button>
                              </div>
                              <div id="payos-error" class="alert alert-danger mt-3" style="display:none;"><span id="payos-error-message">Có lỗi xảy ra. Vui lòng thử lại.</span></div>
                            </div>
                          </form>
                        </div>
                      </div>

                    <!-- Investment Summary -->
                     <!-- Thông tin đầu tư -->
                      <div class="col-md-5">
                        <div class="card p-4 shadow-sm rounded-4">
                          <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">Thông tin đầu tư</h5>
                          </div>

                          <ul class="list-group list-group-flush border rounded-3">
                            <li class="list-group-item d-flex justify-content-between">
                              <span>Quỹ đầu tư</span>
                              <strong id="confirm-fund-name">Quỹ Đầu tư Cổ phiếu FC2</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                              <span>Chương trình</span>
                              <strong id="confirm-program">FFC2 - FFlex</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                              <span>Loại lệnh</span>
                              <strong id="confirm-order-type">Mua</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                              <span>Ngày đặt lệnh</span>
                              <strong id="confirm-order-date">...</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                              <span>Số tiền đầu tư</span>
                              <strong id="confirm-amount">30,000,000đ</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                              <span>Tổng cộng thanh toán</span>
                              <strong id="confirm-total-amount">30,000,000đ</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                              <span>Tổng số CCQ</span>
                              <strong id="confirm-units">0</strong>
                            </li>
                            
                          </ul>

                          <div class="d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-pill btn-sell" id="back-payment-btn">Quay lại</button>
                            <button type="submit" class="btn btn-pill btn-buy" id="payment-confirm-btn">Xác nhận thanh toán</button>
                          </div>
                        </div>
                      </div>

                </div>
            </div>



        </div>
    </div>

    </t>
  </template>
</odoo>
